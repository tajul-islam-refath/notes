# Distributed Server ржХрзА?

ржПржХржЯрж╛ Distributed Server/System ржорж╛ржирзЗ рж╣рж▓рзЛ тАФ

    ржЕржирзЗржХржЧрзБрж▓рзЛ рж╕рж╛рж░рзНржнрж╛рж░ ржПржХрж╕рж╛ржерзЗ ржХрж╛ржЬ ржХрж░рзЗ ржпрзЗржи ржЗржЙржЬрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржкрзБрж░рзЛ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж╛ржХрзЗ ржПржХржЯрж╛ ржЗржЙржирж┐ржлрж╛ржЗржб рж╕рж╛рж░рзНржнрж╛рж░ ржоржирзЗ рж╣рзЯред

ржЕрж░рзНржерж╛рзО, ржХрж╛ржЬржЧрзБрж▓рзЛ ржнрж╛ржЧ рж╣рзЯрзЗ ржпрж╛рзЯ (distribution рж╣рзЯ) ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░рзЗ, ржХрж┐ржирзНрждрзБ ржЗржЙржЬрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ рж╕рзЗржЯрж╛ ржЕржжрзГрж╢рзНржп ржерж╛ржХрзЗред

# ржХрзЗржи ржжрж░ржХрж╛рж░?

### ржПржХржЯрж╛ рж╕рж╛рж░рзНржнрж╛рж░ (single server) рж╕рзАржорж┐ржд:

* CPU, RAM, Storage рж╕рзАржорж╛ржмржжрзНржз

* ржПржХрж╕рж╛ржерзЗ ржЕржирзЗржХ ржЗржЙржЬрж╛рж░ ржПрж▓рзЗ рж▓рзЛржб рж╕рж╛ржорж▓рж╛рждрзЗ ржкрж╛рж░рзЗ ржирж╛

* Fail рж╣рж▓рзЗ ржкрзБрж░рзЛ рж╕рж┐рж╕рзНржЯрзЗржо ржмржирзНржз рж╣рзЯрзЗ ржпрж╛рзЯ

### ЁЯСЙ рж╕ржорж╛ржзрж╛ржи = Distributed Server

* ржЕржирзЗржХ рж╕рж╛рж░рзНржнрж╛рж░ ржПржХрж╕рж╛ржерзЗ ржХрж╛ржЬ ржХрж░рзЗ Scalability ржЖржирзЗ

* Fault tolerance рж╣рзЯ (ржПржХржЯрж╛ рж╕рж╛рж░рзНржнрж╛рж░ ржирж╖рзНржЯ рж╣рж▓рзЗржУ ржЕржирзНржпржЧрзБрж▓рзЛ ржХрж╛ржЬ ржЪрж╛рж▓рж┐рзЯрзЗ ржпрж╛рзЯ)

* High availability (рзирзк/рзн рж╕рж╛рж░рзНржнрж┐рж╕)

# Distributed Server ржПрж░ Components

- Load Balancer тЖТ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрзЛржи рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржпрж╛ржмрзЗ ржарж┐ржХ ржХрж░рзЗред

- Application Servers тЖТ ржХрзЛржб рж░рж╛ржи ржХрж░рзЗ (NestJS, Django, etc)ред

- Database Cluster тЖТ ржбрзЗржЯрж╛ ржнрж╛ржЧ рж╣рзЯрзЗ store рж╣рзЯ (sharding, replication)ред

- Cache (Redis) тЖТ ржжрзНрж░рзБржд рж░рзЗрж╕ржкржирзНрж╕ ржжрзЗрзЯред

- Message Queue (Kafka, RabbitMQ) тЖТ async communication ржПрж░ ржЬржирзНржпред

# Interview Questions

- Distributed system ржХрзА?

- Distributed server ржЖрж░ single server ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржХрзА?

- CAP theorem ржХрзА?

- Distributed system ржП ржбрзЗржЯрж╛ consistency ржХрж┐ржнрж╛ржмрзЗ maintain ржХрж░ржмрзЗ?
- Fault tolerance ржХрж┐ржнрж╛ржмрзЗ ржЖржирж╛ ржпрж╛рзЯ?
- Load balancing ржПрж░ ржнрзВржорж┐ржХрж╛ ржХрзА?

- ржпржжрж┐ рждрзЛржорж╛рж░ рззрзжрзж рж╕рж╛рж░рзНржнрж╛рж░ ржерж╛ржХрзЗ, ржЗржЙржЬрж╛рж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж┐ржнрж╛ржмрзЗ рж╕ржарж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржкрж╛ржарж╛ржмрзЗ?
- Leader election ржмрж▓рждрзЗ ржХрзА ржмрзЛржЭрж╛рзЯ distributed system ржП?
- Latency ржХржорж╛рждрзЗ worldwide distributed server deploy ржХрж░рж▓рзЗ ржХрзА ржХрзА рж╕ржорж╕рзНржпрж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ?

# Voice Chat App тАУ Distributed Architecture

```
 тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР        тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
 тФВ   React Native тФВ  ---> тФВ     API Gateway / LB      тФВ
 тФВ   (Mobile App) тФВ       тФВ (NGINX / AWS ALB / Kong)  тФВ
 тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ        тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                          тФВ
                   тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                   тФВ                      тФВ                       тФВ
        тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР тФМтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
        тФВ Chat Service (Nest) тФВ тФВ Audio Service (DjangoтФВ тФВ   Auth Service   тФВ
        тФВ  - WebSocket/RTC    тФВ тФВ   - Upload/Storage   тФВ тФВ  - JWT / OAuth   тФВ
        тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ тФФтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                   тФВ                      тФВ                       тФВ
                   тФВ                      тФВ                       тФВ
        тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФР   тФМтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
        тФВ   Redis Cluster    тФВ   тФВ  Object Storage   тФВ    тФВ   Database (SQL/ тФВ
        тФВ - Rate Limiting    тФВ   тФВ  (S3, MinIO)      тФВ    тФВ    NoSQL, Shard) тФВ
        тФВ - Session Store    тФВ   тФВ  - Audio files    тФВ    тФВ - User data      тФВ
        тФВ - Pub/Sub (Chat)   тФВ   тФВ                   тФВ    тФВ - Chat metadata  тФВ
        тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ   тФФтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                   тФВ                      тФВ                       тФВ
        тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФР   тФМтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФР    тФМтФАтФАтФАтФАтФАтФАтФАтФАтЦ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
        тФВ  Kafka / RabbitMQ  тФВ   тФВ  CDN (CloudFront тФВ    тФВ Monitoring/Logs  тФВ
        тФВ  - Async tasks     тФВ   тФВ   Akamai, etc.)  тФВ    тФВ (ELK, Grafana)   тФВ
        тФВ  - Event streaming тФВ   тФВ  - Fast delivery тФВ    тФВ                  тФВ
        тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ   тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

## ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ

### Client (React Native App)

ржЗржЙржЬрж╛рж░ ржнрзЯрзЗрж╕ ржорзЗрж╕рзЗржЬ ржкрж╛ржарж╛рзЯ ржмрж╛ рж╢рзЛржирзЗред

рж╕ржм рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрзНрж░ржержорзЗ API Gateway / Load Balancer ржПрж░ ржХрж╛ржЫрзЗ ржпрж╛рзЯред

### API Gateway / Load Balancer

ржЯрзНрж░рж╛ржлрж┐ржХ рж╕ржарж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж░рж╛ржЙржЯ ржХрж░рзЗ (chat, auth, audio)ред

ржПржЦрж╛ржирзЗ ржкрзНрж░рж╛ржержорж┐ржХ Rate Limiting ржмрж╕рж╛ржирзЛ ржпрж╛рзЯред

### Chat Service (NestJS)

WebSocket/RTC рж╣рзНржпрж╛ржирзНржбрж▓ ржХрж░рзЗред

Redis Pub/Sub ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж░рж┐рзЯрзЗрж▓ржЯрж╛ржЗржо ржорзЗрж╕рзЗржЬ рж╕ржм рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕рж┐ржЩрзНржХ ржХрж░рзЗред

ржпржжрж┐ ржПржХ ржЗржЙржЬрж╛рж░ рж╕рж╛рж░рзНржнрж╛рж░ A рждрзЗ ржЖрж░рзЗржХ ржЗржЙржЬрж╛рж░ рж╕рж╛рж░рзНржнрж╛рж░ B рждрзЗ ржерж╛ржХрзЗ, Redis ржПрж░ ржорж╛ржзрзНржпржорзЗ ржорзЗрж╕рзЗржЬ рж╢рзЗрзЯрж╛рж░ рж╣рзЯред

### Audio Service (Django)

ржнрзЯрзЗрж╕ ржлрж╛ржЗрж▓ ржЖржкрж▓рзЛржб ржирзЗрзЯред

ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ Object Storage (S3/MinIO) ржП рж╕рзЗржн рж╣рзЯред

Metadata Database ржП ржпрж╛рзЯред

### Auth Service

JWT / OAuth2 ржжрж┐рзЯрзЗ ржЗржЙржЬрж╛рж░ ржЕржерзЗржиржЯрж┐ржХрзЗржЯ ржХрж░рзЗред

Token validation рж╕ржмрж╛рж░ ржЬржирзНржп ржПржХржЗ ржерж╛ржХрзЗред

## Redis Cluster

Rate limiter store.

WebSocket рж╕рзЗрж╢ржирзЗрж░ ржбрж╛ржЯрж╛ред

Pub/Sub ржЪрзНржпрж╛ржирзЗрж▓ (рж░рж┐рзЯрзЗрж▓ржЯрж╛ржЗржо ржорзЗрж╕рзЗржЬ рж╕рж┐ржЩрзНржХ)ред

### Kafka / RabbitMQ

Async ржХрж╛ржЬ ржпрзЗржоржи тЖТ ржнрзЯрзЗрж╕ ржлрж╛ржЗрж▓ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ, ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржкрж╛ржарж╛ржирзЛ, analytics data рж╕ржВржЧрзНрж░рж╣ред

### CDN

рж░рзЗржХрж░рзНржб ржХрж░рж╛ ржнрзЯрзЗрж╕ ржлрж╛ржЗрж▓ рж╕рж╛рж░рзНржн ржХрж░рждрзЗред

Latency ржХржорж╛рзЯред

### Database (SQL + NoSQL)

SQL тЖТ User, auth, billing ржЗрждрзНржпрж╛ржжрж┐ред

NoSQL (MongoDB/Cassandra) тЖТ Chat message, historyред

Sharding/replication ржХрж░рзЗ distributed data storageред

### Monitoring / Logging

Prometheus + Grafana тЖТ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ health checkред

ELK Stack (ElasticSearch, Logstash, Kibana) тЖТ Error trackingред

## Benefits

* Scalability тЖТ ржирждрзБржи рж╕рж╛рж░рзНржнрж╛рж░ ржпрзЛржЧ ржХрж░рж▓рзЗ load balancer ржнрж╛ржЧ ржХрж░рзЗ ржжрзЗржмрзЗред
* High Availability тЖТ ржПржХржЯрж╛ рж╕рж╛рж░рзНржнрж╛рж░ ржбрж╛ржЙржи рж╣рж▓рзЗржУ ржмрж╛ржХрж┐ рж╕рж╛рж░рзНржнрж╛рж░ ржХрж╛ржЬ ржЪрж╛рж▓рж╛ржмрзЗред
* Low Latency тЖТ CDN ржУ Redis caching ржЗржЙржЬрж╛рж░ржХрзЗ ржжрзНрж░рзБржд рж░рзЗрж╕ржкржирзНрж╕ ржжрзЗржмрзЗред
* Fault Tolerance тЖТ Kafka / RabbitMQ async ржЯрж╛рж╕рзНржХ ржмрзНржпрж╛ржХржЖржк рж░рж╛ржЦрзЗред

## Interview Style Questions

#### ржпржжрж┐ Chat Server ржбрж╛ржЙржи рж╣рзЯрзЗ ржпрж╛рзЯ, ржЕржирзНржп ржЗржЙржЬрж╛рж░рзЗрж░ ржорзЗрж╕рзЗржЬ ржХрж┐ рж╣рж╛рж░рж╛ржмрзЗ? ржХрж┐ржнрж╛ржмрзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░ржмрзЗ?

#### Audio ржлрж╛ржЗрж▓ рж╕рзЗржн ржХрж░рж╛рж░ рж╕ржорзЯ рждрзБржорж┐ Database ржП рж░рж╛ржЦржмрзЗ ржирж╛ Object Storage ржП рж░рж╛ржЦржмрзЗ? ржХрзЗржи?

#### Redis Pub/Sub ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рж▓рзЗ ржХрзА рж╕ржорж╕рзНржпрж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ? Kafka ржжрж┐рзЯрзЗ ржХрж┐ рж╕ржорж╛ржзрж╛ржи ржХрж░рж╛ ржпрж╛рзЯ?

#### рждрзБржорж┐ ржХрзАржнрж╛ржмрзЗ Global Rate Limit ржЖрж░ Per-user Rate Limit ржПржХрж╕рж╛ржерзЗ ржорзНржпрж╛ржирзЗржЬ ржХрж░ржмрзЗ?

#### ржпржжрж┐ рзз ржорж┐рж▓рж┐ржпрж╝ржи ржЗржЙржЬрж╛рж░ ржПржХрж╕рж╛ржерзЗ ржЕржирж▓рж╛ржЗржи ржерж╛ржХрзЗ, рждржЦржи рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржХрзЛржи bottleneck ржЖрж╕рждрзЗ ржкрж╛рж░рзЗ?