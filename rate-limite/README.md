# Rate Limiter ‡¶ï‡ßÄ?

Rate Limiter ‡¶π‡¶≤‡ßã ‡¶è‡¶ï‡¶ü‡¶æ ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ, ‡¶Ø‡¶æ ‡¶¨‡¶≤‡ßá ‡¶¶‡ßá‡ßü ‡¶è‡¶ï‡¶ú‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶¨‡¶æ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶ï‡¶§‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡ßü‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡•§

üëâ ‡¶ï‡ßá‡¶® ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞?

- ‡¶Ö‡¶™‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶∞‡ßã‡¶ß (‡¶Ø‡ßá‡¶Æ‡¶® ‡¶¨‡¶ü ‡¶¶‡¶ø‡ßü‡ßá ‡¶π‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã)‡•§

- ‡¶´‡ßá‡ßü‡¶æ‡¶∞‡¶®‡ßá‡¶∏ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ (‡¶è‡¶ï‡¶ú‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ø‡ßá‡¶® ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶¨ ‡¶∞‡¶ø‡¶∏‡ßã‡¶∞‡ßç‡¶∏ ‡¶ñ‡ßá‡ßü‡ßá ‡¶®‡¶æ ‡¶´‡ßá‡¶≤‡ßá)‡•§

- ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ (‡¶π‡¶†‡¶æ‡ßé ‡¶ü‡ßç‡¶∞‡¶æ‡¶´‡¶ø‡¶ï ‡¶∏‡ßç‡¶™‡¶æ‡¶á‡¶ï ‡¶è‡¶≤‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶ï‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ)‡•§

‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£:
‡¶è‡¶ï‡¶ü‡¶æ API ‡¶§‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá ‡ßß‡ß¶‡ß¶ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã‡•§
‡¶Ø‡¶¶‡¶ø ‡¶ï‡ßá‡¶â ‡¶¨‡ßá‡¶∂‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡ßü ‚Üí ‡¶∏‡ßá 429 Too Many Requests ‡¶∞‡ßá‡¶∏‡¶™‡¶®‡ßç‡¶∏ ‡¶™‡¶æ‡¶¨‡ßá‡•§

# Rate Limiting ‡¶è‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶ó‡¶∞‡¶ø‡¶¶‡¶Æ

### Fixed Window Counter

 * ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡ßü‡ßá ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶≤‡¶æ‡ßü (‡¶Ø‡ßá‡¶Æ‡¶® ‡ßß ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ßß‡ß¶‡ß¶ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü)‡•§

 * ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑‡ßá ‡¶ì ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá ‡¶¨‡¶æ‡¶∞‡ßç‡¶∏‡ßç‡¶ü (burst) ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§

### Sliding Window Log

 * ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶æ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶ü‡¶æ‡¶á‡¶Æ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™ ‡¶∞‡ßá‡¶ñ‡ßá ‡¶¶‡ßá‡ßü‡•§

 * ‡¶ñ‡ßÅ‡¶¨ ‡¶è‡¶ï‡ßç‡¶∏‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶Æ‡ßá‡¶Æ‡¶∞‡¶ø ‡¶¨‡ßá‡¶∂‡¶ø ‡¶ñ‡¶æ‡ßü‡•§

### Sliding Window Counter

 * ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶â‡¶á‡¶®‡ßç‡¶°‡ßã‡¶∞ ‡¶Ü‡¶Ç‡¶∂‡¶ø‡¶ï ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü + ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Æ‡¶ø‡¶∂‡¶ø‡ßü‡ßá ‡¶®‡ßá‡ßü‡•§

 * ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶®‡ßç‡¶∏‡¶° ‡¶â‡¶™‡¶æ‡ßü‡•§

### Token Bucket (‡¶∏‡¶¨‡¶ö‡ßá‡ßü‡ßá ‡¶ú‡¶®‡¶™‡ßç‡¶∞‡¶ø‡ßü)

 * ‡¶è‡¶ï‡¶ü‡¶æ ‡¶¨‡¶æ‡¶≤‡¶§‡¶ø‡¶§‡ßá ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶•‡¶æ‡¶ï‡ßá‡•§ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶π‡¶æ‡¶∞‡ßá ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡•§

 * ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü‡ßá ‡ßß‡¶ü‡¶æ ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶ñ‡¶∞‡¶ö ‡¶π‡ßü‡•§ ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶¨‡ßç‡¶≤‡¶ï ‡¶π‡ßü‡•§

 * ‡¶¨‡¶æ‡¶∞‡ßç‡¶∏‡ßç‡¶ü (burst) ‡¶∏‡¶æ‡¶Æ‡¶≤‡¶æ‡¶§‡ßá ‡¶≠‡¶æ‡¶≤‡ßã‡•§

### Leaky Bucket

 * ‡¶ï‡¶ø‡¶â‡¶§‡ßá ‡¶™‡¶æ‡¶®‡¶ø (‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü) ‡¶¢‡ßã‡¶ï‡ßá, ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶π‡¶æ‡¶∞‡ßá ‡¶¨‡ßá‡¶∞ ‡¶π‡ßü‡•§

 * ‡¶π‡¶†‡¶æ‡ßé ‡¶∏‡ßç‡¶™‡¶æ‡¶á‡¶ï ‡¶∏‡ßç‡¶Æ‡ßÅ‡¶• ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡ßü‡•§

# Best Practices

* Short-term (burst) + Long-term (sustained) ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßã‡•§
* Redis / Memcached ‡¶è‡¶∞ ‡¶Æ‡¶§‡ßã fast datastore ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßã‡•§
* ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶∏‡¶†‡¶ø‡¶ï ‡¶è‡¶∞‡¶∞ ‡¶ï‡ßã‡¶° ‡¶´‡ßá‡¶∞‡¶§ ‡¶¶‡¶æ‡¶ì ‚Üí 429 Too Many Requests‡•§
* Abuse detection ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≤‡¶ó ‡¶∞‡¶æ‡¶ñ‡ßã‡•§
* Premium ‡¶Ü‡¶∞ Free ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶∞‡ßá‡¶ü ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßã‡•§

# ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨ Use Case

* Login API ‚Üí brute force attack ‡¶†‡ßá‡¶ï‡¶æ‡¶§‡ßá‡•§

* ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ (WhatsApp, Messenger) ‚Üí ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ø‡ßá‡¶® ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶π‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶®‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§

* Payment API ‚Üí ‡¶´‡ßç‡¶∞‡¶° ‡¶è‡ßú‡¶æ‡¶§‡ßá ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ‡•§

* Public API (GitHub, Twitter) ‚Üí free quota ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ ‡¶ï‡¶∞‡¶æ‡•§

# ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶≠‡¶ø‡¶â ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®

### ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï

1. **Rate Limiter ‡¶ï‡ßÄ ‡¶è‡¶¨‡¶Ç ‡¶ï‡ßá‡¶® ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞?**  
    Rate Limiter ‡¶π‡¶≤‡ßã ‡¶è‡¶Æ‡¶® ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡ßå‡¶∂‡¶≤, ‡¶Ø‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶Æ‡ßü‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶è‡¶ï‡¶ú‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶¨‡¶æ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶ï‡¶§‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá ‡¶§‡¶æ ‡¶®‡¶ø‡ßü‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£ ‡¶ï‡¶∞‡ßá‡•§ ‡¶è‡¶ü‡¶ø ‡¶Ö‡¶™‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶∞‡ßã‡¶ß, ‡¶´‡ßá‡ßü‡¶æ‡¶∞‡¶®‡ßá‡¶∏ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§‡¶ï‡¶∞‡¶£ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞‡¶ï‡ßá ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶≤‡ßã‡¶° ‡¶•‡ßá‡¶ï‡ßá ‡¶∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡ßü‡•§

2. **Token Bucket ‡¶Ü‡¶∞ Leaky Bucket ‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶™‡¶æ‡¶∞‡ßç‡¶•‡¶ï‡ßç‡¶Ø ‡¶ï‡ßÄ?**  
    - **Token Bucket:** ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶π‡¶æ‡¶∞‡ßá ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü, ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü‡ßá ‡ßß‡¶ü‡¶ø ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶ñ‡¶∞‡¶ö ‡¶π‡ßü‡•§ ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶¨‡¶æ‡¶∞‡ßç‡¶∏‡ßç‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü‡¶ì ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡•§  
    - **Leaky Bucket:** ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡¶ø‡¶â‡¶§‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶π‡ßü ‡¶è‡¶¨‡¶Ç ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶π‡¶æ‡¶∞‡ßá ‡¶¨‡ßá‡¶∞ ‡¶π‡ßü‡•§ ‡¶è‡¶ü‡¶ø ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ‡¶ø‡¶Ç ‡¶∏‡ßç‡¶™‡¶æ‡¶á‡¶ï ‡¶∏‡ßç‡¶Æ‡ßÅ‡¶• ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡ßü, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶¨‡¶æ‡¶∞‡ßç‡¶∏‡ßç‡¶ü ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶ø‡¶Ç ‡¶ï‡¶Æ‡•§

3. **Rate Limit ‡¶õ‡¶æ‡ßú‡¶æ‡¶≤‡ßá ‡¶ï‡ßã‡¶® HTTP status ‡¶´‡ßá‡¶∞‡¶§ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü?**  
    ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ 429 Too Many Requests HTTP status code ‡¶´‡ßá‡¶∞‡¶§ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü, ‡¶Ø‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂ ‡¶ï‡¶∞‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∏‡ßÄ‡¶Æ‡¶æ ‡¶Ö‡¶§‡¶ø‡¶ï‡ßç‡¶∞‡¶Æ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡•§

### 4. Distributed environment ‡¶è ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá Rate Limiting ‡¶ï‡¶∞‡¶¨‡ßá?

Distributed environment-‡¶è rate limiting ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶≤‡ßá, ‡¶∏‡¶¨ instance-‡¶è ‡¶è‡¶ï‡¶á ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü enforce ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡ßü‡•§ ‡¶è‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ Redis, Memcached, ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã centralized fast datastore ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡•§ ‡¶è‡¶§‡ßá ‡¶∏‡¶¨ instance ‡¶è‡¶ï‡¶á ‡¶°‡ßá‡¶ü‡¶æ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü‡¶ø‡¶Ç ‡¶π‡ßü‡•§

**‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ (NestJS + Redis):**

```typescript
// npm install rate-limiter-flexible ioredis
import { RateLimiterRedis } from 'rate-limiter-flexible';
import * as Redis from 'ioredis';

const redisClient = new Redis();

const rateLimiter = new RateLimiterRedis({
    storeClient: redisClient,
    points: 100, // ‡ßß‡ß¶‡ß¶ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü
    duration: 60, // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß¨‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá
});

async function rateLimitMiddleware(req, res, next) {
    try {
        await rateLimiter.consume(req.ip);
        next();
    } catch {
        res.status(429).send('Too Many Requests');
    }
}
```

---

### 5. Fixed Window vs Sliding Window ‡¶è‡¶∞ ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ/‡¶Ö‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ ‡¶ï‡ßÄ?

| Fixed Window | Sliding Window |
|--------------|---------------|
| ‡¶∏‡¶π‡¶ú ‡¶á‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∂‡¶® | ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶ú‡¶ü‡¶ø‡¶≤ ‡¶á‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∂‡¶® |
| ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑‡ßá ‡¶ì ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá burst ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá | burst ‡¶ï‡¶Æ ‡¶π‡ßü, smoother |
| ‡¶ï‡¶Æ ‡¶Æ‡ßá‡¶Æ‡¶∞‡¶ø ‡¶≤‡¶æ‡¶ó‡ßá | ‡¶¨‡ßá‡¶∂‡¶ø ‡¶Æ‡ßá‡¶Æ‡¶∞‡¶ø ‡¶≤‡¶æ‡¶ó‡ßá (log ‡¶π‡¶≤‡ßá) |
| ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá ‡ßß‡ß¶‡ß¶ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü | ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß¨‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡ßß‡ß¶‡ß¶ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü, ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡ßü ‡¶•‡ßá‡¶ï‡ßá ‡¶ó‡¶£‡¶®‡¶æ |

---

### 6. ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá Free vs Premium ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá?

‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ü‡¶æ‡¶á‡¶™ (free/premium) ‡¶¶‡ßá‡¶ñ‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ rate limiter ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡•§

**‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ (NestJS):**

```typescript
const freeLimiter = new RateLimiterRedis({ storeClient: redisClient, points: 100, duration: 60 });
const premiumLimiter = new RateLimiterRedis({ storeClient: redisClient, points: 1000, duration: 60 });

async function rateLimitMiddleware(req, res, next) {
    const userType = req.user.type; // ‡¶ß‡¶∞‡ßã user object ‡¶Ü‡¶õ‡ßá
    const limiter = userType === 'premium' ? premiumLimiter : freeLimiter;
    try {
        await limiter.consume(req.ip);
        next();
    } catch {
        res.status(429).send('Too Many Requests');
    }
}
```

---

### 7. ‡¶π‡¶æ‡¶ú‡¶æ‡¶∞‡ßã microservices instance ‡¶è Rate Limiting ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶ï‡¶∞‡¶¨‡ßá ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá?

- Centralized datastore (Redis) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶¨ instance-‡¶è ‡¶è‡¶ï‡¶á ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü enforce ‡¶ï‡¶∞‡¶æ‡•§
- API Gateway-‡¶è rate limiting implement ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü, ‡¶Ø‡¶æ‡¶§‡ßá backend instance-‡¶è ‡¶ö‡¶æ‡¶™ ‡¶ï‡¶Æ‡ßá‡•§
- Distributed rate limiter library (‡¶Ø‡ßá‡¶Æ‡¶® rate-limiter-flexible) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡•§

---

### 8. ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï API Gateway ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶´‡ßá‡ßü‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶¨‡ßá?

- ‡¶∏‡¶¨ gateway-‡¶ï‡ßá ‡¶è‡¶ï‡¶á centralized datastore (Redis) ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§
- ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã gateway-‡¶§‡ßá ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶Ü‡¶∏‡ßÅ‡¶ï, ‡¶è‡¶ï‡¶á ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶π‡¶¨‡ßá‡•§
- Redis cluster/scaling ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá performance ‡¶¨‡¶æ‡ßú‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡ßü‡•§

---

### 9. ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá per-IP + per-user + global limit ‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá?

- ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ limiter ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá, ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶æ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü‡ßá ‡¶∏‡¶¨‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§
- ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá per-user, ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ per-IP, ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ global limiter ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ‡•§

**‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£ (NestJS):**

```typescript
async function rateLimitMiddleware(req, res, next) {
    try {
        await Promise.all([
            userLimiter.consume(req.user.id),
            ipLimiter.consume(req.ip),
            globalLimiter.consume('global'),
        ]);
        next();
    } catch {
        res.status(429).send('Too Many Requests');
    }
}
```

### Rate Limiter Guard ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ

```typescript
import {
  CanActivate,
  ExecutionContext,
  Injectable,
  TooManyRequestsException,
  Inject,
} from '@nestjs/common';
import Redis from 'ioredis';

@Injectable()
export class RateLimitGuard implements CanActivate {
  constructor(@Inject('REDIS_CLIENT') private readonly redis: Redis) {}

  private limit = 10;       // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá ‡ßß‡ß¶‡¶ü‡¶æ ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü
  private ttl = 60;         // ‡ß¨‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶â‡¶á‡¶®‡ßç‡¶°‡ßã

  async canActivate(context: ExecutionContext): Promise<boolean> {
    const request = context.switchToHttp().getRequest();
    const userIp = request.ip || 'global';

    const key = `rate-limit:${userIp}`;

    // Redis ‡¶è ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶¨‡¶æ‡ßú‡¶æ‡¶®‡ßã
    const current = await this.redis.incr(key);

    if (current === 1) {
      // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶≤‡ßá TTL ‡¶¨‡¶∏‡¶æ‡¶®‡ßã
      await this.redis.expire(key, this.ttl);
    }

    if (current > this.limit) {
      throw new TooManyRequestsException('Too Many Requests');
    }

    return true;
  }
}
```